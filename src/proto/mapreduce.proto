syntax = "proto3";

package mapreduce;

service Master {
    rpc ProcessClientRequest (ClientRequest) returns (Response);
}

service MapperListener {
    rpc ProcessMapRequest (MapRequest) returns (Response);
    rpc GetMapConfig (MapConfigRequest) returns (MapConfig);
}

message ClientRequest {
    string input_filepath = 1;
    string mapper_execpath = 2;
    string reducer_execpath = 3;
    uint64 split_size_bytes = 4;
    uint32 num_reducers = 5;
}

message MapRequest {
    string filepath = 1;
    string execpath = 2;
    uint32 num_reducers = 3;
}

message MapConfigRequest {
    // Later probably id of map request or sth.
    string nothing = 1;
}

message MapConfig {
    string filepath = 1;
    uint32 num_reducers = 2;
}

message Response {
    string result = 1;
}